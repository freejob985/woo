# ================================
# ğŸ”’ Murjan CORS Configuration
# Ù…Ù„Ù .htaccess Ù„Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ CORS
# ================================
# ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¬Ø°Ø± Ù„Ù€ WordPress
# Location: public_html/.htaccess Ø£Ùˆ www/.htaccess
# ================================

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress

# ================================
# ğŸŒ CORS Headers Configuration
# ================================
<IfModule mod_headers.c>
    # âœ… Handle preflight OPTIONS requests
    RewriteCond %{REQUEST_METHOD} OPTIONS
    RewriteRule ^(.*)$ $1 [R=200,L]
    
    # ğŸ” Allow credentials (cookies, authorization)
    Header always set Access-Control-Allow-Credentials "true"
    
    # ğŸ“‹ Allow all necessary HTTP methods
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS, PATCH"
    
    # ğŸ“¦ Allow all necessary headers
    Header always set Access-Control-Allow-Headers "Authorization, Content-Type, X-WP-Nonce, X-Requested-With, Accept, Origin, X-Api-Key"
    
    # ğŸ“Š Expose custom headers
    Header always set Access-Control-Expose-Headers "X-WP-Total, X-WP-TotalPages"
    
    # â±ï¸ Cache preflight for 24 hours
    Header always set Access-Control-Max-Age "86400"
    
    # ğŸŒ Allow specific origins (PRODUCTION MODE - RECOMMENDED)
    # Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø®ÙŠØ§Ø± Ù„Ù„Ø¥Ù†ØªØ§Ø¬ - Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹
    SetEnvIf Origin "^https://(woo-silk\.vercel\.app|woo-4pdx\.vercel\.app|dev\.murjan\.sa|murjan\.sa|www\.murjan\.sa)$" AccessControlAllowOrigin=$0
    SetEnvIf Origin "^http://(localhost:3000|localhost:5173|127\.0\.0\.1:3000|127\.0\.0\.1:5173)$" AccessControlAllowOrigin=$0
    Header always set Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin
    
    # OR use this for development (allow all origins - less secure)
    # Ù„Ù„ØªØ·ÙˆÙŠØ± ÙÙ‚Ø· - ÙŠØ³Ù…Ø­ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ø·Ø§Ù‚Ø§Øª
    # Header always set Access-Control-Allow-Origin "*"
</IfModule>

# ================================
# ğŸ›¡ï¸ Security Headers
# ================================
<IfModule mod_headers.c>
    # Prevent clickjacking
    Header always set X-Frame-Options "SAMEORIGIN"
    
    # XSS Protection
    Header always set X-XSS-Protection "1; mode=block"
    
    # Prevent MIME sniffing
    Header always set X-Content-Type-Options "nosniff"
    
    # Referrer Policy
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# ================================
# ğŸ“ Instructions | ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
# ================================
# 1. Ø§Ø±ÙØ¹ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¬Ø°Ø± Ù„Ù€ WordPress
# 2. Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ù…Ù„Ù .htaccess Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø§Ø¯Ù…Ø¬ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¹Ù‡
# 3. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† mod_headers Ùˆ mod_rewrite Ù…ÙØ¹Ù‘Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
# 4. Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŒ Ø§Ø³ØªØ®Ø¯Ù… murjan-cors-fix.php ÙƒÙ€ must-use plugin
# ================================

